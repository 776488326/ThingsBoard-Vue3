{"version":3,"file":"index-87ef9524.js","sources":["../../src/views/login/src/views/login/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { Message, Lock } from '@element-plus/icons-vue'\r\nimport { reactive, ref } from 'vue'\r\nimport FadeTransition from '@/components/fade_transition/index.vue'\r\nimport { userMessageStore } from '@/stores/user.ts'\r\nimport router from '@/router/index.ts'\r\nconst store = userMessageStore()\r\nconst loginForm = reactive({\r\n  userName: '',\r\n  password: '',\r\n})\r\nlet isRemeber = ref(false)\r\n// 处理记住密码\r\nlet tempStatus = localStorage.getItem('isRemeber')\r\nif (tempStatus) {\r\n  isRemeber.value = JSON.parse(tempStatus)\r\n  if (isRemeber.value) {\r\n    const userInfo = localStorage.getItem('userInfo')\r\n    if (!userInfo) {\r\n      isRemeber.value = false\r\n    } else {\r\n      const { userName, password } = JSON.parse(userInfo)\r\n      loginForm.password = password\r\n      loginForm.userName = userName\r\n    }\r\n  }\r\n}\r\n\r\nlet signUp = reactive({\r\n  firstName: '',\r\n  lastName: '',\r\n  password: '',\r\n  email: '',\r\n})\r\nlet loading = ref(false)\r\nlet isRegistrySuccess = ref(false)\r\nlet isSignUp = ref(false)\r\nasync function submitForm() {\r\n  let res = await store.userLogin(loginForm)\r\n  if (res) {\r\n    localStorage.setItem('userInfo', JSON.stringify(loginForm))\r\n    localStorage.setItem('isAuthenticated', JSON.stringify(true))\r\n    localStorage.setItem('isRemeber', JSON.stringify(isRemeber.value))\r\n    router.push({ name: 'Layout' })\r\n  }\r\n}\r\n\r\nasync function registryUser() {\r\n  loading.value = true\r\n  let res = await store.userRegistry(signUp)\r\n  isRegistrySuccess.value = !!res\r\n  loginForm.password = store.user_message.password as string\r\n  loginForm.userName = store.user_message.userName as string\r\n  loading.value = false\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container\">\r\n    <el-scrollbar height=\"800px\" id=\"login_container\">\r\n      <form>\r\n        <header id=\"login_logo\">\r\n          <img\r\n            id=\"img\"\r\n            aria-label=\"logo\"\r\n            src=\"/logo_title_white.svg\"\r\n            alt=\"login_icon\"\r\n          />\r\n        </header>\r\n        <label id=\"label\">Log in to see ThingsBoard in action</label>\r\n        <fieldset id=\"login_btn\">\r\n          <el-button disabled class=\"elb\" size=\"default\" @click=\"\">\r\n            Google登录\r\n          </el-button>\r\n          <el-button disabled class=\"elb\" size=\"default\" @click=\"\">\r\n            Facebook登录\r\n          </el-button>\r\n          <el-button disabled class=\"elb\" size=\"default\" @click=\"\">\r\n            Github登录\r\n          </el-button>\r\n          <el-button disabled class=\"elb\" size=\"default\" @click=\"\">\r\n            Apple登录\r\n          </el-button>\r\n        </fieldset>\r\n        <fieldset id=\"login_divider\">\r\n          <section class=\"left\"></section>\r\n          <section class=\"center\">或</section>\r\n          <section class=\"right\"></section>\r\n        </fieldset>\r\n        <FadeTransition name=\"bounce\">\r\n          <fieldset id=\"sign_up\" v-if=\"isSignUp\">\r\n            <section id=\"registry_operate\">\r\n              <legend id=\"sign_up_title\">注册账号</legend>\r\n              <el-button size=\"default\" @click=\"isSignUp = false\" text>\r\n                返回登录\r\n              </el-button>\r\n            </section>\r\n            <section id=\"fullname\">\r\n              <el-input v-model=\"signUp.firstName\" placeholder=\"姓\"></el-input>\r\n              <span id=\"place\">&nbsp</span>\r\n              <el-input v-model=\"signUp.lastName\" placeholder=\"名\"></el-input>\r\n            </section>\r\n            <el-input\r\n              :prefix-icon=\"Message\"\r\n              v-model=\"signUp.email\"\r\n              type=\"email\"\r\n              placeholder=\"用户名（电子邮件）*\"\r\n            ></el-input>\r\n            <el-input\r\n              :prefix-icon=\"Lock\"\r\n              show-password\r\n              v-model=\"signUp.password\"\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n            ></el-input>\r\n\r\n            <el-button\r\n              id=\"registry\"\r\n              type=\"primary\"\r\n              @click=\"registryUser\"\r\n              :loading=\"loading\"\r\n            >\r\n              {{ isRegistrySuccess ? '注册成功' : '注册' }}\r\n            </el-button>\r\n          </fieldset>\r\n          <fieldset v-else>\r\n            <fieldset id=\"login_form\">\r\n              <el-input\r\n                v-model=\"loginForm.userName\"\r\n                placeholder=\"用户名（电子邮件）*\"\r\n                type=\"email\"\r\n                :prefix-icon=\"Message\"\r\n              ></el-input>\r\n              <el-input\r\n                v-model=\"loginForm.password\"\r\n                placeholder=\"密码\"\r\n                type=\"password\"\r\n                show-password\r\n                :prefix-icon=\"Lock\"\r\n              ></el-input>\r\n            </fieldset>\r\n            <fieldset id=\"login_operate\">\r\n              <el-checkbox v-model=\"isRemeber\" label=\"记住密码\" />\r\n              <el-button text size=\"default\" @click=\"isSignUp = true\">\r\n                注册账号\r\n              </el-button>\r\n            </fieldset>\r\n            <fieldset id=\"login_submit\">\r\n              <el-button id=\"submit\" type=\"primary\" @click=\"submitForm\">\r\n                登录\r\n              </el-button>\r\n            </fieldset>\r\n          </fieldset>\r\n        </FadeTransition>\r\n      </form>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100vh;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: $bg-color;\r\n\r\n  #login_container {\r\n    background-color: $theme-color;\r\n    width: 35%;\r\n    height: 800px;\r\n    overflow-y: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    #login_logo {\r\n      width: 50%;\r\n      height: 60px;\r\n      margin: 30px auto;\r\n      #img {\r\n        width: 100%;\r\n      }\r\n    }\r\n    #label {\r\n      display: block;\r\n      width: 100%;\r\n      color: $font-color;\r\n      text-align: center;\r\n    }\r\n    #login_btn {\r\n      margin-top: 50px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: stretch;\r\n      .elb {\r\n        margin: 10px 20px;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n    #login_divider {\r\n      margin: 10px 20px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      color: white;\r\n      .left,\r\n      .right {\r\n        height: 2px;\r\n        width: 45%;\r\n        // background-color: $loginFsLightColor;\r\n      }\r\n    }\r\n    #login_form {\r\n      margin: 10px 20px;\r\n      :deep(.el-input__wrapper) {\r\n        margin: 25px 0px;\r\n      }\r\n    }\r\n    #login_operate {\r\n      margin: 10px 20px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n    }\r\n    #sign_up {\r\n      margin: 50px 20px;\r\n      #registry_operate {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n      }\r\n      #sign_up_title {\r\n        color: $font-color;\r\n        font-weight: bold;\r\n        font-size: 24px;\r\n        margin: 20px;\r\n      }\r\n      #fullname {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        margin: 10px 0px;\r\n      }\r\n      :deep(.el-input__wrapper) {\r\n        margin: 10px 0px;\r\n      }\r\n    }\r\n    #login_submit {\r\n      margin: 40px 20px 10px;\r\n    }\r\n    #submit,\r\n    #registry {\r\n      margin: 10px 0px;\r\n      width: 100%;\r\n      background-color: $second-light-color;\r\n      border: none;\r\n      padding: 20px;\r\n      border-radius: 5px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  @media (width<=768px) {\r\n    #login_container {\r\n      width: 80%;\r\n    }\r\n  }\r\n  @media (width>=1920px) {\r\n    #login_container {\r\n      width: 20%;\r\n    }\r\n  }\r\n}\r\n\r\n.v-enter-active,\r\n.v-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.v-enter-from,\r\n.v-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>\r\n"],"names":["store","userMessageStore","loginForm","reactive","isRemeber","ref","tempStatus","userInfo","userName","password","signUp","loading","isRegistrySuccess","isSignUp","submitForm","router","registryUser","res"],"mappings":"27CAMA,MAAAA,EAAAC,IACAC,EAAAC,EAAA,CAA2B,SAAA,GACf,SAAA,EACA,CAAA,EAEZ,IAAAC,EAAAC,EAAA,EAAA,EAEAC,EAAA,aAAA,QAAA,WAAA,EACA,GAAAA,IACEF,EAAA,MAAA,KAAA,MAAAE,CAAA,EACAF,EAAA,OAAA,CACE,MAAAG,EAAA,aAAA,QAAA,UAAA,EACA,GAAA,CAAAA,EACEH,EAAA,MAAA,OAAkB,CAElB,KAAA,CAAA,SAAAI,EAAA,SAAAC,CAAA,EAAA,KAAA,MAAAF,CAAA,EACAL,EAAA,SAAAO,EACAP,EAAA,SAAAM,GAKN,IAAAE,EAAAP,EAAA,CAAsB,UAAA,GACT,SAAA,GACD,SAAA,GACA,MAAA,EACH,CAAA,EAETQ,EAAAN,EAAA,EAAA,EACAO,EAAAP,EAAA,EAAA,EACAQ,EAAAR,EAAA,EAAA,EACA,eAAAS,GAAA,CACE,MAAAd,EAAA,UAAAE,CAAA,IAEE,aAAA,QAAA,WAAA,KAAA,UAAAA,CAAA,CAAA,EACA,aAAA,QAAA,kBAAA,KAAA,UAAA,EAAA,CAAA,EACA,aAAA,QAAA,YAAA,KAAA,UAAAE,EAAA,KAAA,CAAA,EACAW,EAAA,KAAA,CAAA,KAAA,QAAA,CAAA,EACF,CAGF,eAAAC,GAAA,CACEL,EAAA,MAAA,GACA,IAAAM,EAAA,MAAAjB,EAAA,aAAAU,CAAA,EACAE,EAAA,MAAA,CAAA,CAAAK,EACAf,EAAA,SAAAF,EAAA,aAAA,SACAE,EAAA,SAAAF,EAAA,aAAA,SACAW,EAAA,MAAA,EAAgB"}